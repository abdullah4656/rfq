{% extends "rfq_app/base.html" %}

{% block title %}RFQ Summary - RFQ System{% endblock %}
{% block progress_width %}100%{% endblock %}
{% block progress_text %}Complete - RFQ Summary{% endblock %}
{% block progress_percent %}100% Complete{% endblock %} 
{% block heading %}Your Custom Furniture Quote{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header" style="background-color: #000000 !important;">
                <h5 class="mb-0" style="color: #ffffff !important;"><i class="fas fa-check-circle"></i> Quote Summary</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <tr>
                            <th>Base Product</th>
                            <td class="text-end">${{ base_price|floatformat:2 }}</td>
                        </tr>
                        
                        {% if fabric %}
                        <tr>
                            <th>Fabric: {{ fabric.main_title }}{% if fabric.sub_title %} - {{ fabric.sub_title }}{% endif %}</th>
                            <td class="text-end">+${{ fabric.main_price|floatformat:2 }}{% if fabric.sub_price %} + ${{ fabric.sub_price|floatformat:2 }}{% endif %}</td>
                        </tr>
                        {% endif %}
                        
                        {% if size %}
                        <tr>
                            <th>Size: {{ size.main_title }}{% if size.sub_title %} - {{ size.sub_title }}{% endif %}</th>
                            <td class="text-end">+${{ size.main_price|floatformat:2 }}{% if size.sub_price %} + ${{ size.sub_price|floatformat:2 }}{% endif %}</td>
                        </tr>
                        {% endif %}
                        
                        {% if upholstery %}
                        <tr>
                            <th>Upholstery: {{ upholstery.main_title }}{% if upholstery.sub_title %} - {{ upholstery.sub_title }}{% endif %}</th>
                            <td class="text-end">+${{ upholstery.main_price|floatformat:2 }}{% if upholstery.sub_price %} + ${{ upholstery.sub_price|floatformat:2 }}{% endif %}</td>
                        </tr>
                        {% endif %}
                        
                        {% if base_option %}
                        <tr>
                            <th>Base: {{ base_option.main_title }}{% if base_option.sub_title %} - {{ base_option.sub_title }}{% endif %}</th>
                            <td class="text-end">+${{ base_option.main_price|floatformat:2 }}{% if base_option.sub_price %} + ${{ base_option.sub_price|floatformat:2 }}{% endif %}</td>
                        </tr>
                        {% endif %}
                        
                        {% if rails %}
                        <tr>
                            <th>Rails: {{ rails.main_title }}{% if rails.sub_title %} - {{ rails.sub_title }}{% endif %}</th>
                            <td class="text-end">+${{ rails.main_price|floatformat:2 }}{% if rails.sub_price %} + ${{ rails.sub_price|floatformat:2 }}{% endif %}</td>
                        </tr>
                        {% endif %}
                        
                        {% if frame_finish %}
                        <tr>
                            <th>Frame Finish: {{ frame_finish.main_title }}{% if frame_finish.sub_title %} - {{ frame_finish.sub_title }}{% endif %}</th>
                            <td class="text-end">+${{ frame_finish.main_price|floatformat:2 }}{% if frame_finish.sub_price %} + ${{ frame_finish.sub_price|floatformat:2 }}{% endif %}</td>
                        </tr>
                        {% endif %}
                        
                        {% if height %}
                        <tr>
                            <th>Height: {{ height.main_title }}{% if height.sub_title %} - {{ height.sub_title }}{% endif %}</th>
                            <td class="text-end">+${{ height.main_price|floatformat:2 }}{% if height.sub_price %} + ${{ height.sub_price|floatformat:2 }}{% endif %}</td>
                        </tr>
                        {% endif %}
                        
                        {% if frame_trim %}
                        <tr>
                            <th>Frame Trim: {{ frame_trim.main_title }}{% if frame_trim.sub_title %} - {{ frame_trim.sub_title }}{% endif %}</th>
                            <td class="text-end">+${{ frame_trim.main_price|floatformat:2 }}{% if frame_trim.sub_price %} + ${{ frame_trim.sub_price|floatformat:2 }}{% endif %}</td>
                        </tr>
                        {% endif %}
                        {% if finish_trim %}
<tr>
    <th>Finish Trim: {{ finish_trim.main_title }}{% if finish_trim.sub_title %} - {{ finish_trim.sub_title }}{% endif %}</th>
    <td class="text-end">+${{ finish_trim.main_price|floatformat:2 }}{% if finish_trim.sub_price %} + ${{ finish_trim.sub_price|floatformat:2 }}{% endif %}</td>
</tr>
{% endif %}

{% if pricing %}
<tr>
    <th>Pricing: {{ pricing.main_title }}{% if pricing.sub_title %} - {{ pricing.sub_title }}{% endif %}</th>
    <td class="text-end">+${{ pricing.main_price|floatformat:2 }}{% if pricing.sub_price %} + ${{ pricing.sub_price|floatformat:2 }}{% endif %}</td>
</tr>
{% endif %}

{% if drawer_sidepannel %}
<tr>
    <th>Drawer Side Panel: {{ drawer_sidepannel.main_title }}{% if drawer_sidepannel.sub_title %} - {{ drawer_sidepannel.sub_title }}{% endif %}</th>
    <td class="text-end">+${{ drawer_sidepannel.main_price|floatformat:2 }}{% if drawer_sidepannel.sub_price %} + ${{ drawer_sidepannel.sub_price|floatformat:2 }}{% endif %}</td>
</tr>
{% endif %}

{% if seat %}
<tr>
    <th>Seat: {{ seat.main_title }}{% if seat.sub_title %} - {{ seat.sub_title }}{% endif %}</th>
    <td class="text-end">+${{ seat.main_price|floatformat:2 }}{% if seat.sub_price %} + ${{ seat.sub_price|floatformat:2 }}{% endif %}</td>
</tr>
{% endif %}

{% if decorative_hardware_finish %}
<tr>
    <th>Decorative Hardware Finish: {{ decorative_hardware_finish.main_title }}{% if decorative_hardware_finish.sub_title %} - {{ decorative_hardware_finish.sub_title }}{% endif %}</th>
    <td class="text-end">+${{ decorative_hardware_finish.main_price|floatformat:2 }}{% if decorative_hardware_finish.sub_price %} + ${{ decorative_hardware_finish.sub_price|floatformat:2 }}{% endif %}</td>
</tr>
{% endif %}

{% if decorative_hardware_style %}
<tr>
    <th>Decorative Hardware Style: {{ decorative_hardware_style.main_title }}{% if decorative_hardware_style.sub_title %} - {{ decorative_hardware_style.sub_title }}{% endif %}</th>
    <td class="text-end">+${{ decorative_hardware_style.main_price|floatformat:2 }}{% if decorative_hardware_style.sub_price %} + ${{ decorative_hardware_style.sub_price|floatformat:2 }}{% endif %}</td>
</tr>
{% endif %}

{% if top %}
<tr>
    <th>Top: {{ top.main_title }}{% if top.sub_title %} - {{ top.sub_title }}{% endif %}</th>
    <td class="text-end">+${{ top.main_price|floatformat:2 }}{% if top.sub_price %} + ${{ top.sub_price|floatformat:2 }}{% endif %}</td>
</tr>
{% endif %}

{% if optional_drawer_side_panels_trim %}
<tr>
    <th>Optional Drawer & Side Panels Trim: {{ optional_drawer_side_panels_trim.main_title }}{% if optional_drawer_side_panels_trim.sub_title %} - {{ optional_drawer_side_panels_trim.sub_title }}{% endif %}</th>
    <td class="text-end">+${{ optional_drawer_side_panels_trim.main_price|floatformat:2 }}{% if optional_drawer_side_panels_trim.sub_price %} + ${{ optional_drawer_side_panels_trim.sub_price|floatformat:2 }}{% endif %}</td>
</tr>
{% endif %}
                        <tr style="background-color: #f8f9fa;">
                            <th><strong>Grand Total</strong></th>
                            <td class="text-end"><strong>${{ grand_total|floatformat:2 }}</strong></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        
        {% if notes %}
        <div class="card mt-4">
            <div class="card-header" style="background-color: #000000 !important;">
                <h5 class="mb-0" style="color: #ffffff !important;"><i class="fas fa-sticky-note"></i> Your Notes</h5>
            </div>
            <div class="card-body">
                <p class="card-text">{{ notes }}</p>
            </div>
        </div>
        {% endif %}
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header" style="background-color: #000000 !important;">
                <h5 class="mb-0" style="color: #ffffff !important;"><i class="fas fa-user"></i> Customer Information</h5>
            </div>
            <div class="card-body">
                <p><strong>Name:</strong> {{ customer_name }}</p>
                <p><strong>Email:</strong> {{ customer_email }}</p>
            </div>
        </div>
        
        <div class="card mt-4">
            <div class="card-header" style="background-color: #000000 !important;">
                <h5 class="mb-0" style="color: #ffffff !important;"><i class="fas fa-info-circle"></i> Next Steps</h5>
            </div>
            <div class="card-body">
                <p>Your quote has been sent to our team. We'll contact you within 24 hours to:</p>
                <ul>
                    <li>Confirm your selections</li>
                    <li>Discuss delivery options</li>
                    <li>Answer any questions</li>
                </ul>
            </div>
        </div>
        
        <div class="mt-4">
            <a href="{% url 'rfq_summary_pdf' product_id=product_id %}" class="btn btn-outline-primary w-100 mb-2">
                <i class="fas fa-download me-2"></i> Download PDF Quote
            </a>
            <a href="{% url 'step1_select_product' %}" class="btn btn-outline-secondary w-100">
                <i class="fas fa-plus me-2"></i> Create New Quote
            </a>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="alert alert-info" style="background-color: #f8f9fa; border-color: #000000; color: #000000;">
            <h5><i class="fas fa-check-circle me-2"></i> Thank you for your request!</h5>
            <p class="mb-0">Your custom furniture quote has been submitted successfully. We've sent a copy to {{ customer_email }}.</p>
        </div>
    </div>
</div>
{% endblock %}
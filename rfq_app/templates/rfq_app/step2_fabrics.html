{% extends "rfq_app/base.html" %}
{% block content %}
{% include "rfq_app/stepper.html" with step=2 %}

<h2 class="mb-4">Select Fabric</h2>

<!-- Search Bar -->
<form method="get" class="mb-4 d-flex">
  <input type="text" name="q" value="{{ query }}" class="form-control me-2" placeholder="Search fabrics...">
  <button type="submit" class="btn btn-gold">Search</button>
</form>

<div class="row">
  <div class="col-md-8">
    <form method="POST" class="row g-4">
      {% csrf_token %}
      {% for f in fabrics %}
        <div class="col-md-6 col-12">
          <div class="card h-100 text-center p-3">
            {% if f.image_url %}
              <img src="{{ f.image_url }}" class="card-img-top" alt="{{ f.title }}"
                   style="max-height:150px; object-fit:cover;">
            {% endif %}
            <div class="card-body">
              <label>
                <input type="radio" name="fabric" value="{{ f.key }}">
                <strong>{{ f.title }}</strong><br>
                <span>+ ${{ f.price }}</span>
              </label>
            </div>
          </div>
        </div>
      {% empty %}
        <p>No fabrics found.</p>
      {% endfor %}

      <div class="col-12 sticky-next">
        <button type="submit" class="btn btn-gold">Next â†’</button>
      </div>
    </form>
  </div>

  <div class="col-md-4">
    <div class="rfq-total-box">
      <h4>Running Total</h4>
      <p class="fs-5"><strong>${{ running_total }}</strong></p>
    </div>
  </div>
</div>
{% endblock %}

{% extends "rfq_app/base.html" %}
{% block content %}

<h2 class="mb-4">RFQ Summary - Marge Carson</h2>
<div class="card p-4 shadow-sm">
  <h4>Customer Information</h4>
  <p><strong>Name:</strong> {{ customer_name }}</p>
  <p><strong>Email:</strong> {{ customer_email }}</p>
  <p><strong>Notes:</strong> {% if notes %}{{ notes }}{% else %}N/A{% endif %}</p>
<!-- <p><strong>Name:</strong> {{ rfq.customer_name }}</p>
<p><strong>Email:</strong> {{ rfq.customer_email }}</p>
<p><strong>Notes:</strong> {% if rfq.notes %}{{ rfq.notes }}{% else %}N/A{% endif %}</p> -->
  <hr>
  <h4>Product Details</h4>
  <p><strong>Product ID:</strong> {{ product_id }}</p>
  <p><strong>Base Price:</strong> ${{ base_price|floatformat:2 }}</p>

  <hr>
  <h4>Selected Options</h4>
  
  <!-- Fabric -->
  {% if fabric %}
    <p><strong>Fabric:</strong> {{ fabric.title }}{% if fabric.price %} (+${{ fabric.price|floatformat:2 }}){% endif %}
      {% if fabric.sub_title %} - {{ fabric.sub_title }}{% if fabric.sub_price %} (+${{ fabric.sub_price|floatformat:2 }}){% endif %}{% endif %}
    </p>
  {% endif %}

  <!-- Size -->
  {% if size %}
    <p><strong>Size:</strong> {{ size.title }}{% if size.price %} (+${{ size.price|floatformat:2 }}){% endif %}
      {% if size.sub_title %} - {{ size.sub_title }}{% if size.sub_price %} (+${{ size.sub_price|floatformat:2 }}){% endif %}{% endif %}
    </p>
  {% endif %}

  <!-- Upholstery -->
  {% if upholstery %}
    <p><strong>Upholstery:</strong> {{ upholstery.title }}{% if upholstery.price %} (+${{ upholstery.price|floatformat:2 }}){% endif %}
      {% if upholstery.sub_title %} - {{ upholstery.sub_title }}{% if upholstery.sub_price %} (+${{ upholstery.sub_price|floatformat:2 }}){% endif %}{% endif %}
    </p>
  {% endif %}

  <!-- Base Option -->
  {% if base_option %}
    <p><strong>Base Option:</strong> {{ base_option.title }}{% if base_option.price %} (+${{ base_option.price|floatformat:2 }}){% endif %}
      {% if base_option.sub_title %} - {{ base_option.sub_title }}{% if base_option.sub_price %} (+${{ base_option.sub_price|floatformat:2 }}){% endif %}{% endif %}
    </p>
  {% endif %}

  <!-- Rails -->
  {% if rails %}
    <p><strong>Rails:</strong> {{ rails.title }}{% if rails.price %} (+${{ rails.price|floatformat:2 }}){% endif %}
      {% if rails.sub_title %} - {{ rails.sub_title }}{% if rails.sub_price %} (+${{ rails.sub_price|floatformat:2 }}){% endif %}{% endif %}
    </p>
  {% endif %}

  <!-- Frame Finish -->
  {% if frame_finish %}
    <p><strong>Frame Finish:</strong> {{ frame_finish.title }}{% if frame_finish.price %} (+${{ frame_finish.price|floatformat:2 }}){% endif %}
      {% if frame_finish.sub_title %} - {{ frame_finish.sub_title }}{% if frame_finish.sub_price %} (+${{ frame_finish.sub_price|floatformat:2 }}){% endif %}{% endif %}
    </p>
  {% endif %}

  <!-- Height -->
  {% if height %}
    <p><strong>Height:</strong> {{ height.title }}{% if height.price %} (+${{ height.price|floatformat:2 }}){% endif %}
      {% if height.sub_title %} - {{ height.sub_title }}{% if height.sub_price %} (+${{ height.sub_price|floatformat:2 }}){% endif %}{% endif %}
    </p>
  {% endif %}

  <!-- Frame Trim -->
  {% if frame_trim %}
    <p><strong>Frame Trim:</strong> {{ frame_trim.title }}{% if frame_trim.price %} (+${{ frame_trim.price|floatformat:2 }}){% endif %}
      {% if frame_trim.sub_title %} - {{ frame_trim.sub_title }}{% if frame_trim.sub_price %} (+${{ frame_trim.sub_price|floatformat:2 }}){% endif %}{% endif %}
    </p>
  {% endif %}

  <!-- Finish Trim -->
  {% if finish_trim %}
    <p><strong>Finish Trim:</strong> {{ finish_trim.title }}{% if finish_trim.price %} (+${{ finish_trim.price|floatformat:2 }}){% endif %}
      {% if finish_trim.sub_title %} - {{ finish_trim.sub_title }}{% if finish_trim.sub_price %} (+${{ finish_trim.sub_price|floatformat:2 }}){% endif %}{% endif %}
    </p>
  {% endif %}

  <!-- Pricing -->
  {% if pricing %}
    <p><strong>Pricing:</strong> {{ pricing.title }}{% if pricing.price %} (+${{ pricing.price|floatformat:2 }}){% endif %}
      {% if pricing.sub_title %} - {{ pricing.sub_title }}{% if pricing.sub_price %} (+${{ pricing.sub_price|floatformat:2 }}){% endif %}{% endif %}
    </p>
  {% endif %}

  <!-- Drawer Side Panel -->
  {% if drawer_sidepannel %}
    <p><strong>Drawer Side Panel:</strong> {{ drawer_sidepannel.title }}{% if drawer_sidepannel.price %} (+${{ drawer_sidepannel.price|floatformat:2 }}){% endif %}
      {% if drawer_sidepannel.sub_title %} - {{ drawer_sidepannel.sub_title }}{% if drawer_sidepannel.sub_price %} (+${{ drawer_sidepannel.sub_price|floatformat:2 }}){% endif %}{% endif %}
    </p>
  {% endif %}

  <!-- Seat -->
  {% if seat %}
    <p><strong>Seat:</strong> {{ seat.title }}{% if seat.price %} (+${{ seat.price|floatformat:2 }}){% endif %}
      {% if seat.sub_title %} - {{ seat.sub_title }}{% if seat.sub_price %} (+${{ seat.sub_price|floatformat:2 }}){% endif %}{% endif %}
    </p>
  {% endif %}

  <!-- Decorative Hardware Finish -->
  {% if decorative_hardware_finish %}
    <p><strong>Decorative Hardware Finish:</strong> {{ decorative_hardware_finish.title }}{% if decorative_hardware_finish.price %} (+${{ decorative_hardware_finish.price|floatformat:2 }}){% endif %}
      {% if decorative_hardware_finish.sub_title %} - {{ decorative_hardware_finish.sub_title }}{% if decorative_hardware_finish.sub_price %} (+${{ decorative_hardware_finish.sub_price|floatformat:2 }}){% endif %}{% endif %}
    </p>
  {% endif %}

  <!-- Decorative Hardware Style -->
  {% if decorative_hardware_style %}
    <p><strong>Decorative Hardware Style:</strong> {{ decorative_hardware_style.title }{% if decorative_hardware_style.price %} (+${{ decorative_hardware_style.price|floatformat:2 }}){% endif %}
      {% if decorative_hardware_style.sub_title %} - {{ decorative_hardware_style.sub_title }}{% if decorative_hardware_style.sub_price %} (+${{ decorative_hardware_style.sub_price|floatformat:2 }}){% endif %}{% endif %}
    </p>
  {% endif %}

  <!-- Top -->
  {% if top %}
    <p><strong>Top:</strong> {{ top.title }}{% if top.price %} (+${{ top.price|floatformat:2 }}){% endif %}
      {% if top.sub_title %} - {{ top.sub_title }}{% if top.sub_price %} (+${{ top.sub_price|floatformat:2 }}){% endif %}{% endif %}
    </p>
  {% endif %}

  <!-- Optional Drawer & Side Panels Trim -->
  {% if optional_drawer_side_panels_trim %}
    <p><strong>Optional Drawer & Side Panels Trim:</strong> {{ optional_drawer_side_panels_trim.title }}{% if optional_drawer_side_panels_trim.price %} (+${{ optional_drawer_side_panels_trim.price|floatformat:2 }}){% endif %}
      {% if optional_drawer_side_panels_trim.sub_title %} - {{ optional_drawer_side_panels_trim.sub_title }}{% if optional_drawer_side_panels_trim.sub_price %} (+${{ optional_drawer_side_panels_trim.sub_price|floatformat:2 }}){% endif %}{% endif %}
    </p>
  {% endif %}

  <div class="mt-4 p-4 border rounded bg-light">
    <h4>Total Investment</h4>
    <p class="fs-3 text-success"><strong>${{ grand_total|floatformat:2 }}</strong></p>
    <p class="text-muted small">Includes base price and all selected options</p>
  </div>
</div>

<div class="mt-4">
  <a href="{% url 'step1_select_product' %}" class="btn btn-primary me-2">
    <i class="fas fa-plus me-2"></i>Create New Quote
  </a>
  <a href="{% url 'rfq_summary_pdf' product_id=product_id %}" class="btn btn-outline-primary" target="_blank">
    <i class="fas fa-download me-2"></i>Download PDF
  </a>
</div>

{% endblock %}